@startuml uml_state_scene_switcher

title SceneSwitcher State Machine

[*] --> Idle

Idle --> Switched : switchWithRevert(rule)\n[revertSeconds > 0]
Idle --> Idle : switchWithRevert(rule)\n[revertSeconds == 0]

Switched --> Suppressed : switchWithRevert()\n[during transition]
Suppressed --> Switched : after 1 second\n[timer continues]
Switched --> Reverting : revertTimer timeout
Reverting --> Idle : scene reverted

note right of Idle
  å¾…æ©Ÿä¸­
  - ã‚¿ã‚¤ãƒãƒ¼åœæ­¢
  - æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—ä»˜å¯èƒ½
end note

note right of Switched
  ã‚·ãƒ¼ãƒ³åˆ‡æ›¿å¾Œ
  - revertTimer å‹•ä½œä¸­
  - countdownTimer å‹•ä½œä¸­
  - UI: "ğŸ”„ åˆ‡æ›¿ä¸­: Xç§’"
end note

note right of Suppressed
  æŠ‘åˆ¶ä¸­ï¼ˆä¸€æ™‚çš„ï¼‰
  - ã‚¿ã‚¤ãƒãƒ¼ã¯ç¶™ç¶š
  - 1ç§’å¾Œã« Switched è¡¨ç¤ºã«æˆ»ã‚‹
  - UI: "âš  æŠ‘åˆ¶ä¸­ (Xç§’)"
  - å®Ÿéš›ã® state_ ã¯ Switched ã®ã¾ã¾
end note

note right of Reverting
  å¾©å¸°ä¸­
  - ã‚·ãƒ¼ãƒ³ã‚’å…ƒã«æˆ»ã™å‡¦ç†ä¸­
  - UI: "â± å¾©å¸°ä¸­"
  - å‡¦ç†å®Œäº†å¾Œã™ãã« Idle ã¸
end note

@enduml
