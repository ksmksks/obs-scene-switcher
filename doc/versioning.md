# Versioning Policy
# OBS Scene Switcher

> NOTE FOR COPILOT:
> このドキュメントは「バージョンごとの実装可能範囲」を定義する。
> バージョン契約を破る実装は禁止。

---

## v0.x — 仕様確定前フェーズ

v0.x 系は、機能追加・設計調整・UX 改善を行う実験的フェーズとする。
この期間中は、破壊的変更や内部構造の見直しを許容する。

---

## v0.1.x — UI 基盤

- プラグイン構造
- Dock UI
- 設定保存
- 認証 UI（通信なし）

---

## v0.2.x — OAuth 基盤

- Twitch OAuth 実装
- 安全な認証情報保存
- 認証状態 UI

---

## v0.3.x — UX 改善

- 認証状態の可視化
- エラーダイアログ改善
- 初回起動安定化

---

## v0.4.x — EventSub 導入

- WebSocket 接続
- Channel Point 通知受信
- セッション管理

---

## v0.5.x — ルール・復帰処理

- RewardRule 導入
- シーン復帰タイマー
- ルール永続化

---

## v0.6.x — 状態管理と制御の確立

v0.6.x 系では、シーン切替処理の内部構造を整理し、
安全かつ決定的に動作するための制御基盤を確立した。

---

### v0.6.0 — 状態管理

- シーン切替処理を State Machine によって管理する設計を導入
- 状態遷移に基づく競合・多重実行の抑制
- 即時復帰（revertSeconds = 0）に対応

---

### v0.6.1 — 有効 / 無効 トグル

- プラグイン全体の有効 / 無効制御を導入
- 有効化は UI 操作によってのみ行われる設計を確立
- 無効時は EventSub 接続および Redemption 処理を完全に停止
- 状態に応じた基本的な UI 表示を追加

---

### v0.6.2 — 状態詳細化

- 状態表示の情報量を拡張
- 表示対象にシーン名を含めるなど、UX の向上を実施
- 内部ロジックや State Machine の挙動は変更なし

---

### v0.6.3 — ルール単位制御

- ルール単位での有効 / 無効制御を追加
- 無効化されたルールは評価対象外となる

---

### v0.6.4 — UI 改善

- ルール管理 UI の改善
- 並び替え操作や削除時の UX を向上

---

### v0.6.5 — 任意シーンマッチング

- ソースシーンに「任意（Any）」マッチングを追加
- 現在のシーンに依存しないルール実行を可能に
- 既存のルール優先順位仕様との後方互換性を維持

**Bug fixes**:
- 抑制中でも復帰タイマーが継続する問題を修正
- シーン復帰処理の安定性を向上

---

## v0.7.x — 配布準備フェーズ

v0.7.x 系では、配布に向けた最終準備を行う。

---

### v0.7.0 — 配布準備

- ログ整理（INFO / DEBUG）
- README / ドキュメント整備（英語・日本語）

---

### v0.7.1 — 更新チェッカーとログ改善

- 自動更新通知機能の追加
- GitHub Releases との連携
- ログプレフィックスの統一（[obs-scene-switcher]）
- デバッグログの改善

---

### v0.7.2 — 国際化対応

- 多言語サポート（英語・日本語）
- OBS 設定からの自動言語検出
- すべての UI 要素の翻訳対応
- ロケールファイル (en-US.ini, ja-JP.ini)

---

### v0.8.0 — インストーラー

- Windows インストーラーの追加
- OBS Studio の自動検出
- Windows 設定への統合
- クリーンなアンインストール機能
- 手動インストール用 ZIP パッケージ

---

## v0.9.0 — Beta Release

**目的**:
- コア機能のベータ版リリース
- ユーザーフィードバックの収集
- 安定性と品質の検証

**実装内容**:
- 包括的な UML 図（7 種類）によるアーキテクチャドキュメント
- architecture.md の拡張（11 セクション）
- バージョン契約と開発ロードマップの明確化
- README の英語・日本語両言語対応
- コア機能の完成
  - Twitch Channel Point による OBS シーン切り替え
  - ルールベース評価（任意シーン含む）
  - 復帰タイマーと抑制制御
  - 有効 / 無効ライフサイクル
  - OAuth / EventSub 連携

**ベータ版の注意事項**:
- バグや不具合が存在する可能性があります
- フィードバックは GitHub Issues にお寄せください
- v0.9.x でバグ修正と改善を行います
- v1.0.0 で安定版リリース予定

---

## v1.0.0 — Stable Release（予定）

**目的**:
- OBS シーン切替プラグインとしてのコア仕様を確定する
- ベータ版フィードバックに基づく品質保証

**保証される挙動**:
- Twitch Channel Point による OBS シーン切り替え
- ルールベース評価（任意シーン含む）
- 決定的なルール評価順序
- 復帰タイマーと抑制制御
- 明示的な有効 / 無効ライフサイクル
- OAuth / EventSub の安定動作
- インストーラーによる配布

**重要**: v1.0.0 以降、上記コア仕様に対する破壊的変更は禁止される。

---

## v1.1.x — アクション実行基盤

**目的**:
- 外部アクションを扱うための共通実行モデルの導入
- シーン切替と外部アクションの統一的な処理基盤の確立

**実装内容**:
- Action Type による処理の抽象化
- 統一実行モデルの導入
- 拡張機能を安全に追加するための内部構造整理

**重要**:
- 既存のシーン切替動作は完全に維持される
- UI や設定に対する破壊的変更は行わない
- 内部リファクタリングのみを実施

---

## v1.2.x — VTube Studio 連携（基本）

**目的**:
- VTube Studio との基本的な連携機能の実装

**実装内容**:
- VTube Studio への接続サポート
- Twitch Channel Point をトリガーにした表情（Expression / Hotkey）の実行
- 表情一覧の取得と UI での選択機能
- 単発表情実行（自動復帰なし）

**制限事項**:
- 表情の自動復帰機能は含まない（v1.3.x で実装予定）
- OBS シーン切替との複合アクションは含まない

---

## v1.3.x — 高度な表情制御

**目的**:
- VTube Studio 表情制御の完成度向上

**実装内容**:
- 表情の自動復帰（指定秒数後に元の状態に戻す）
- 表情切替中の競合制御・抑制
- 単一ルール内での複合アクション対応
  - OBS シーン切替 + VTube Studio 表情の同時実行

**設計方針**:
- OBS シーン切替と同様の State Machine による制御
- 既存の競合制御ロジックとの整合性を維持

---

## 将来の方向性

今後の開発は以下の原則に従う：

1. **コア仕様の保護**
   - v1.0.0 で確定したシーン切替仕様に対する破壊的変更は禁止

2. **拡張レイヤとしての実装**
   - 新機能は既存機能に影響を与えない形で追加
   - Action 抽象化を前提とした設計

3. **段階的な機能追加**
   - 各バージョンで実装範囲を明確に定義
   - バージョン契約を厳守

4. **コミュニティ駆動**
   - ユーザーフィードバックに基づく改善
   - より柔軟なアクション定義の検討
   - 配信向けユースケースに応じた拡張

---

## バージョン管理の原則

### 破壊的変更の禁止

v1.0.0 以降、以下の要素に対する破壊的変更は禁止される：

- シーン切替の評価ロジック
- ルールの優先順位
- 状態遷移の基本挙動
- 設定ファイルフォーマット（後方互換性を維持）
- OAuth / EventSub の動作仕様

### 拡張の原則

新機能は以下の原則に従って実装される：

1. **既存機能への影響ゼロ**
   - 新機能の有効 / 無効に関わらず、既存機能は変わらず動作

2. **オプトイン方式**
   - 新機能はデフォルトで無効
   - ユーザーが明示的に有効化する

3. **設定の後方互換性**
   - 古いバージョンの設定ファイルは新バージョンでも動作
   - 新しい設定項目は古いバージョンで無視される

---

## Copilot への指示

- 実装前に必ず現在のバージョン範囲を確認すること
- バージョン契約を超える実装は禁止
- 不明点は実装せず TODO として出力すること
- コメントにバージョン番号を記載しないこと（機能の説明のみ）
